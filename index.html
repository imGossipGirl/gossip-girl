<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gossip Girl</title>

<link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/Gossip_girl_titlecard.svg/1200px-Gossip_girl_titlecard.svg.png">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

<style>
body, html {
  margin: 0;
  padding: 0;
  font-family: 'Roboto', sans-serif;
  background: url('https://primary.jwwb.nl/public/v/f/z/temp-drvbpvglefwdvbrbqnho/ur18xk/IMG_1169.jpg') no-repeat center center fixed;
  background-size: cover;
}

/* Header */
.title {
  display: flex;
  justify-content: center;
  margin-top: 20px;
}
.title img { width: 350px; }

/* Layout */
.container {
  display: flex;
  justify-content: center;
  gap: 40px;
  margin-top: 20px;
  flex-wrap: wrap;
}

/* Left text */
.left-section {
  text-align: left;
}
.left-section h3 { margin-bottom: 0; }
.left-section p { margin-top: 0; color: #777; }

/* Card */
.main-card {
  background: white;
  padding: 20px;
  border-radius: 12px;
  width: 320px;
  box-shadow: 0 10px 25px rgba(0,0,0,.4);
}
.main-card img {
  width: 100%;
  border-radius: 10px;
  margin: 10px 0;
}
.description {
  font-size: .9rem;
}
.signature {
  text-align: right;
  color: #7bbacc;
  font-size: .8rem;
}

/* Admin editor */
#homeEditor {
  display: none;
  margin-top: 15px;
}
#homeEditor input,
#homeEditor textarea {
  width: 100%;
  padding: 8px;
  margin-bottom: 8px;
}

/* Buttons */
button {
  padding: 8px;
  width: 100%;
  background: black;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="title">
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/Gossip_girl_titlecard.svg/1200px-Gossip_girl_titlecard.svg.png">
</div>

<div class="container">

  <div class="left-section">
    <h3>welcome</h3>
    <p>to Gossip Girl!<br>THE Site ABOUT the<br>Upper East Side.</p>

    <h3>pics</h3>
    <p><u onclick="location.href='pics.html'">CURRENT PHOTO</u></p>

    <h3>parties</h3>
    <p><u onclick="location.href='parties.html'">CLICK HERE</u></p>
  </div>

  <div class="main-card">
    <p class="spotted"><strong>Spotted:</strong></p>

    <img src="" alt="Spotted">

    <p class="description"></p>
    <p class="signature">xo xo GOSSIP GIRL</p>

    <!-- ADMIN EDITOR -->
    <div id="homeEditor">
      <input id="editName" placeholder="Spotted name">
      <input id="editImage" placeholder="Image URL">
      <textarea id="editCaption" placeholder="Caption"></textarea>
      <button onclick="saveHomePost()">Save</button>
    </div>
  </div>

</div>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
firebase.initializeApp({
  apiKey: "AIzaSyAG70-TmzFjnvgZhRkPR1DuDOrTComfwsc",
  authDomain: "gossip-girl-4e394.firebaseapp.com",
  projectId: "gossip-girl-4e394"
});

const auth = firebase.auth();
const db = firebase.firestore();

const spottedText = document.querySelector(".spotted strong");
const postImage   = document.querySelector(".main-card img");
const postCaption = document.querySelector(".description");
const editor      = document.getElementById("homeEditor");

/* LOAD HOME POST (PUBLIC) */
db.collection("home").doc("main").onSnapshot(doc => {
  if (!doc.exists) return;
  const d = doc.data();
  spottedText.textContent = "Spotted: " + d.name;
  postImage.src = d.image;
  postCaption.textContent = d.caption;
});

/* SHOW EDITOR ONLY IF LOGGED IN */
auth.onAuthStateChanged(user => {
  editor.style.display = user ? "block" : "none";
});

/* SAVE HOME POST */
function saveHomePost() {
  db.collection("home").doc("main").set({
    name: document.getElementById("editName").value,
    image: document.getElementById("editImage").value,
    caption: document.getElementById("editCaption").value,
    time: Date.now()
  }).then(() => alert("Updated ðŸ’‹"));
}
</script>

</body>
</html>

